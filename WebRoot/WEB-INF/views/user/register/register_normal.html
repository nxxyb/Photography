<#assign basePath=request.contextPath>
<!DOCTYPE HTML>
<html>
<head>
<!-- title start-->
   <#include "../../common/title.html">
  <!-- title end-->
  
  <!-- link start-->
   <#include "../../common/link.html">
  <script src="${basePath}/js/MD5.js" type="text/javascript"></script>
  <!-- link end-->
  
</head>

<body>
  <!-- header start-->
  <#include "../../common/header.html">
  <!-- header end -->
  
 <div class="container" style="margin-top: 5%;margin-bottom: 15%;">
		<div class="row clearfix">
			<div class="col-md-12 column">
				<div class="row clearfix">
					<div class="col-md-2 column">
					</div>
					<div class="col-md-5 column">
						<div class="panel panel-warning well well-small">
							<div class="panel-heading">
								<h3 class="panel-title lead">
									<strong>注册</strong>
								</h3>
							</div>
							<div class="panel-body">
								<form class="form-horizontal" id="registerForm" role="form" action="${basePath}/user/register" method="post">
									<div class="form-group">
										<div class="col-sm-11">
											<div class="input-group">
												<span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-envelope"></span></span>
												<input id="inputEmail" type="email" class="form-control"  name="email" maxlength="50" autocomplete="on" autofocus="autofocus" placeholder="邮箱地址" r/>
											</div>
										</div>
									</div>
									
									<div class="form-group">
										<div class="col-sm-11">
											<div class="input-group">
												<span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-lock"></span></span>
												<input type="password" class="form-control" name="password" autocomplete="off"  placeholder="密码 为6-10位字母或数字" />
											</div>
										</div>
									</div>
									
									<div class="form-group">
										<div class="col-sm-11">
											<div class="input-group">
												<span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-lock"></span></span>
												<input type="password" class="form-control" name="password1" autocomplete="off" placeholder="确认密码" />
											</div>
										</div>
									</div>
									
									<div class="form-group">
										<div class="col-sm-11">
											 <button type="submit" class="btn btn-default">注册</button>
											 <a class="btn pull-right" href="${basePath}/user/toLogin">登录</a>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
					<div class="col-md-3 column">
						<div class="panel panel-warning well well-small">
							<div class="panel-heading">
								<h3 class="panel-title lead">
									<strong>第三方帐号登录</strong>
								</h3>
							</div>
							<div class="panel-body">
							
								<p class="text-center"><a class="btn btn-success"><span class="weixin"></span>微信登录</a></p>
		                        <p class="text-center"><a class="btn btn-danger"><span class="weibo"></span>微博登录</a></p>
		                        <p class="text-center"><a class="btn btn-info"><span class="qq"></span>QQ 登录</a></p>
							</div>
						</div>
					</div>
					<div class="col-md-2 column">
						
					</div>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
	
		 $('#registerForm').bootstrapValidator({
		 	message: 'This value is not valid',
	        feedbackIcons: {
	            valid: 'glyphicon glyphicon-ok',
	            invalid: 'glyphicon glyphicon-remove',
	            validating: 'glyphicon glyphicon-refresh'
        	},
        	 fields: {
        	 	email: {
	                validators: {
	                    notEmpty: {
	                        message: '邮箱未填写'
	                    },
	                	 emailAddress: {
                        	message: '不是有效的邮箱地址'
                    	},
	                    remote: {
	                        url: '${basePath}/user/checkEmail',
	                        message: '该邮箱地址已经被注册，请更换其他邮箱地址'
	                    }
	                }
	            },
	            password: {
	                validators: {
	                    notEmpty: {
	                        message: '密码未填写'
	                    },
	                    stringLength: {
	                        min: 6,
	                        max: 10,
	                        message: '密码 为6-10位字母或数字组合'
                    	}
	                }
	            },
	            password1: {
	                validators: {
	                	 notEmpty: {
	                        message: '确认密码未填写'
	                     },
	                     identical: {
                        	field: 'password',
                        	message: '两次输入的密码不一致'
                    	 }
	                }
	            }
		 	}
		 });
		
		function checkEmail(){
			var email = document.getElementById("inputEmail");
			$.ajax({
            type: "post",
            dataType: "json",
            url: "${basePath}/user/checkEmail",
            data: {email: email.value},
            success: function(msg){
            	if(msg == "1"){
                	email.setCustomValidity("该邮箱地址已经被注册，请更换其他邮箱地址！");
                }else{
                	email.setCustomValidity("");
                }
               }
            });
		}
	</script>
	

		<!-- footer start-->
  <#include "../../common/footer.html">
  <!-- footer end -->
  
  </body>
</html>